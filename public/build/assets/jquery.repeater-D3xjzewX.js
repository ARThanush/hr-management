import{j as L}from"./jquery-BnC5r8ns.js";import"./_commonjsHelpers-Cpj98o6Y.js";(function(o){var M=function(n){return n},y=function(n){return o.isArray(n)},A=function(n){return!y(n)&&n instanceof Object},q=function(n,f){return o.inArray(f,n)},D=function(n,f){return q(n,f)!==-1},m=function(n,f){for(var a in n)n.hasOwnProperty(a)&&f(n[a],a,n)},F=function(n){return n[n.length-1]},G=function(n,f){var a=[];return m(n,function(c,s,v){a.push(f(c,s,v))}),a},H=function(n,f,a){var c={};return m(n,function(s,v,b){v=a?a(v,s):v,c[v]=f(s,v,b)}),c},N=function(n,f,a){return y(n)?G(n,f):H(n,f,a)},E=function(n,f,a){return N(n,function(c,s){return c[f].apply(c,[])})},P=function(n,f){var a=null;return function(){var c=this,s=arguments;a===null&&(a=setTimeout(function(){a=null},n),f.apply(c,s))}},Q=function(n){n=n||{};var f={};return n.publish=function(a,c){m(f[a],function(s){s(c)})},n.subscribe=function(a,c){f[a]=f[a]||[],f[a].push(c)},n.unsubscribe=function(a){m(f,function(c){var s=q(c,a);s!==-1&&c.splice(s,1)})},n};(function(n){var f=function(r,e){var t=Q(),i=r.$;return t.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},t.$=function(u){return u?i.find(u):i},t.disable=function(){t.$().prop("disabled",!0),t.publish("isEnabled",!1)},t.enable=function(){t.$().prop("disabled",!1),t.publish("isEnabled",!0)},e.equalTo=function(u,p){return u===p},e.publishChange=function(){var u;return function(p,x){var d=t.get();e.equalTo(d,u)||t.publish("change",{e:p,domElement:x}),u=d}}(),t},a=function(r,e){var t=f(r,e);return t.get=function(){return t.$().val()},t.set=function(i){t.$().val(i)},t.clear=function(){t.set("")},e.buildSetter=function(i){return function(u){i.call(t,u)}},t},c=function(r,e){r=y(r)?r:[r],e=y(e)?e:[e];var t=!0;return r.length!==e.length?t=!1:m(r,function(i){D(e,i)||(t=!1)}),t},s=function(r){var e={},t=a(r,e);return t.getType=function(){return"button"},t.$().on("change",function(i){e.publishChange(i,this)}),t},v=function(r){var e={},t=a(r,e);return t.getType=function(){return"checkbox"},t.get=function(){var i=[];return t.$().filter(":checked").each(function(){i.push(n(this).val())}),i},t.set=function(i){i=y(i)?i:[i],t.$().each(function(){n(this).prop("checked",!1)}),m(i,function(u){t.$().filter('[value="'+u+'"]').prop("checked",!0)})},e.equalTo=c,t.$().change(function(i){e.publishChange(i,this)}),t},b=function(r){var e=O(r);return e.getType=function(){return"email"},e},T=function(r){var e={},t=f(r,e);return t.getType=function(){return"file"},t.get=function(){return F(t.$().val().split("\\"))},t.clear=function(){this.$().each(function(){n(this).wrap("<form>").closest("form").get(0).reset(),n(this).unwrap()})},t.$().change(function(i){e.publishChange(i,this)}),t},S=function(r){var e={},t=a(r,e);return t.getType=function(){return"hidden"},t.$().change(function(i){e.publishChange(i,this)}),t},B=function(r){var e={},t=f(r,e);return t.getType=function(){return"file[multiple]"},t.get=function(){var i=t.$().get(0).files||[],u=[],p;for(p=0;p<(i.length||0);p+=1)u.push(i[p].name);return u},t.clear=function(){this.$().each(function(){n(this).wrap("<form>").closest("form").get(0).reset(),n(this).unwrap()})},t.$().change(function(i){e.publishChange(i,this)}),t},l=function(r){var e={},t=a(r,e);return t.getType=function(){return"select[multiple]"},t.get=function(){return t.$().val()||[]},t.set=function(i){t.$().val(i===""?[]:y(i)?i:[i])},e.equalTo=c,t.$().change(function(i){e.publishChange(i,this)}),t},h=function(r){var e=O(r);return e.getType=function(){return"password"},e},g=function(r){var e={},t=a(r,e);return t.getType=function(){return"radio"},t.get=function(){return t.$().filter(":checked").val()||null},t.set=function(i){i?t.$().filter('[value="'+i+'"]').prop("checked",!0):t.$().each(function(){n(this).prop("checked",!1)})},t.$().change(function(i){e.publishChange(i,this)}),t},I=function(r){var e={},t=a(r,e);return t.getType=function(){return"range"},t.$().change(function(i){e.publishChange(i,this)}),t},k=function(r){var e={},t=a(r,e);return t.getType=function(){return"select"},t.$().change(function(i){e.publishChange(i,this)}),t},O=function(r){var e={},t=a(r,e);return t.getType=function(){return"text"},t.$().on("change keyup keydown",function(i){e.publishChange(i,this)}),t},U=function(r){var e={},t=a(r,e);return t.getType=function(){return"textarea"},t.$().on("change keyup keydown",function(i){e.publishChange(i,this)}),t},j=function(r){var e=O(r);return e.getType=function(){return"url"},e},C=function(r){var e={},t=r.$,i=r.constructorOverride||{button:s,text:O,url:j,email:b,password:h,range:I,textarea:U,select:k,"select[multiple]":l,radio:g,checkbox:v,file:T,"file[multiple]":B,hidden:S},u=function(x,d){var $=A(d)?d:t.find(d);$.each(function(){var w=n(this).attr("name");e[w]=i[x]({$:n(this)})})},p=function(x,d){var $=[],w=A(d)?d:t.find(d);A(d)?e[w.attr("name")]=i[x]({$:w}):(w.each(function(){q($,n(this).attr("name"))===-1&&$.push(n(this).attr("name"))}),m($,function(R){e[R]=i[x]({$:t.find('input[name="'+R+'"]')})}))};if(t.is("input, select, textarea"))if(t.is('input[type="button"], button, input[type="submit"]'))u("button",t);else if(t.is("textarea"))u("textarea",t);else if(t.is('input[type="text"]'))u("text",t);else if(t.is('input[type="password"]'))u("password",t);else if(t.is('input[type="email"]'))u("email",t);else if(t.is('input[type="url"]'))u("url",t);else if(t.is('input[type="range"]'))u("range",t);else if(t.is("select"))t.is("[multiple]")?u("select[multiple]",t):u("select",t);else if(t.is('input[type="file"]'))t.is("[multiple]")?u("file[multiple]",t):u("file",t);else if(t.is('input[type="hidden"]'))u("hidden",t);else if(t.is('input[type="radio"]'))p("radio",t);else if(t.is('input[type="checkbox"]'))p("checkbox",t);else throw"invalid input type";else u("button",'input[type="button"], button, input[type="submit"]'),u("text",'input[type="text"]'),u("password",'input[type="password"]'),u("email",'input[type="email"]'),u("url",'input[type="url"]'),u("range",'input[type="range"]'),u("textarea","textarea"),u("select","select:not([multiple])"),u("select[multiple]","select[multiple]"),u("file",'input[type="file"]:not([multiple])'),u("file[multiple]",'input[type="file"][multiple]'),u("hidden",'input[type="hidden"]'),p("radio",'input[type="radio"]'),p("checkbox",'input[type="checkbox"]');return e};n.fn.inputVal=function(r){var e=n(this),t=C({$:e});return e.is("input, textarea, select")?typeof r>"u"?t[e.attr("name")].get():(t[e.attr("name")].set(r),e):typeof r>"u"?E(t,"get"):(m(r,function(i,u){t[u].set(i)}),e)},n.fn.inputOnChange=function(r){var e=n(this),t=C({$:e});return m(t,function(i){i.subscribe("change",function(u){r.call(u.domElement,u.e)})}),e},n.fn.inputDisable=function(){var r=n(this);return E(C({$:r}),"disable"),r},n.fn.inputEnable=function(){var r=n(this);return E(C({$:r}),"enable"),r},n.fn.inputClear=function(){var r=n(this);return E(C({$:r}),"clear"),r}})(L),o.fn.repeater=function(n){n=n||{};var f=this,a=n.show||function(){o(this).show()},c=n.hide||function(l){l()},s=f.find("[data-repeater-list]"),v=s.find("[data-repeater-item]").first().clone().hide(),b=s.data("repeater-list"),T=function(){s.find("[data-repeater-item]").each(function(l){o(this).find("[name]").each(function(){var h=o(this).attr("name").match(/\[[^\]]+\]/g),g=h?F(h).replace(/\[|\]/g,""):o(this).attr("name"),I=b+"["+l+"]["+g+"]"+(o(this).is(":checkbox")?"[]":"");o(this).attr("name",I)})}),s.find("input[name][checked]").removeAttr("checked").prop("checked",!0)};T();var S=function(l,h){var g;g=l.find("[name]").first().attr("name").match(/\[([0-9]*)\]/)[1],l.inputVal(N(h,M,function(I){var k=b+"["+g+"]["+I+"]";return l.find('[name="'+k+'"]').length?k:k+"[]"}))},B=function(){var l=function(h){var g=n.defaultValues;h.find("[name]").each(function(){o(this).inputClear()}),g&&S(h,g)};return function(h){s.append(h),T(),l(h)}}();return f.find("[data-repeater-create]").click(P(50,function(){var l=v.clone();B(l),a.call(l.get(0))})),s.on("click","[data-repeater-delete]",P(50,function(){var l=o(this).closest("[data-repeater-item]").get(0);c.call(l,function(){o(l).remove(),T()})})),this}})(L);
